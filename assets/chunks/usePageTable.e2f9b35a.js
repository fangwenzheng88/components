import{i as p}from"./dayjs.min.c0ea899f.js";import{u as f}from"./index.4ca96b29.js";import{h as r,a4 as C}from"./framework.f34eef09.js";const i=()=>({current:1,pageSize:10,total:0,showTotal:!0,showPageSize:!0});function D(t){const u=r(!1),l=r([]),e=f(t.columns),a=r(i());function m(n){return a.value.current=n,o()}function c(n){return a.value.current=1,a.value.pageSize=n,o()}p(t.pagination)&&(a.value={...i(),...t.pagination});function o(){return u.value=!0,t.fetch({pageNum:a.value.current,pageSize:a.value.pageSize,columnKeys:[...e.columnKeys.value]}).then(n=>{l.value=n.records,a.value.total=n.total}).finally(()=>{u.value=!1})}function d(){return o()}function s(){return a.value.current=1,o()}return t.immediate===!0&&s(),{tableData:l,loading:u,loadTableData:s,refreshData:d,pagination:a,tableInstance:e.tableInstance,originColumns:e.originColumns,columns:e.columns,columnKeys:e.columnKeys,resetColumns:e.resetColumns,changeColumnVisibleByDataIndex:e.changeColumnVisibleByDataIndex,updateColumnByDataIndex:e.updateColumnByDataIndex,replaceColumnByDataIndex:e.replaceColumnByDataIndex,tableConfig:C({loading:u,data:l,columns:e.columns,ref:e.ref,pagination:a,onPageChange:m,onPageSizeChange:c,onColumnResize(n,g){e.updateColumnByDataIndex(n,"width",g),e.updateColumnsWidth()}})}}export{D as u};
