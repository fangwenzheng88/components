import{i as p}from"./is.179ae4a7.js";import"./dayjs.min.fc668ad8.js";import{u as d}from"./index.44acc78f.js";import{h as o,y as f,a4 as y}from"./framework.f34eef09.js";const m=()=>({current:1,pageSize:10,total:0,showTotal:!0,showPageSize:!0});function b(t){const u=o(!1),l=o([]),e=d(t.columns),n=o(!1);let r,s;(t.pagination===!0||p(t.pagination))&&(n.value=t.pagination===!0?m():{...m(),...t.pagination},r=a=>{n.value.current=a},s=a=>{n.value.current=1,n.value.pageSize=a}),f(()=>{if(n.value!==!1){const a=Array.isArray(l.value)?l.value.length:0;n.value.total=a}});function i(){if(u.value=!0,!t.fetch)throw new Error("useTable请提供fetch配置项");return t.fetch({columnKeys:[...e.columnKeys.value]}).then(a=>{l.value=Array.isArray(a)?a:[]}).finally(()=>{u.value=!1})}return t.immediate===!0&&i(),{tableData:l,loading:u,loadTableData:i,pagination:n,tableInstance:e.tableInstance,originColumns:e.originColumns,columns:e.columns,columnKeys:e.columnKeys,resetColumns:e.resetColumns,changeColumnVisibleByDataIndex:e.changeColumnVisibleByDataIndex,updateColumnByDataIndex:e.updateColumnByDataIndex,replaceColumnByDataIndex:e.replaceColumnByDataIndex,tableConfig:y({loading:u,data:l,columns:e.columns,ref:e.ref,pagination:n,onPageChange:r,onPageSizeChange:s,onColumnResize(a,c){e.updateColumnByDataIndex(a,"width",c),e.updateColumnsWidth()}})}}export{b as u};
