import{i}from"./is.179ae4a7.js";import"./dayjs.min.fc668ad8.js";import{u as C}from"./index.44acc78f.js";import{h as r,a4 as d}from"./framework.f34eef09.js";const c=()=>({current:1,pageSize:10,total:0,showTotal:!0,showPageSize:!0});function D(t){const u=r(!1),l=r([]),e=C(t.columns),n=r(c());function m(a){return n.value.current=a,o()}function g(a){return n.value.current=1,n.value.pageSize=a,o()}i(t.pagination)&&(n.value={...c(),...t.pagination});function o(){return u.value=!0,t.fetch({pageNum:n.value.current,pageSize:n.value.pageSize,columnKeys:[...e.columnKeys.value]}).then(a=>{i(a)?(l.value=Array.isArray(a.records)?a.records:[],n.value.total=a.total??0):console.warn("useTablePage请求返回结果数据异常!",a)}).finally(()=>{u.value=!1})}function p(){return o()}function s(){return n.value.current=1,o()}return t.immediate===!0&&s(),{tableData:l,loading:u,loadTableData:s,refreshData:p,pagination:n,tableInstance:e.tableInstance,originColumns:e.originColumns,columns:e.columns,columnKeys:e.columnKeys,resetColumns:e.resetColumns,changeColumnVisibleByDataIndex:e.changeColumnVisibleByDataIndex,updateColumnByDataIndex:e.updateColumnByDataIndex,replaceColumnByDataIndex:e.replaceColumnByDataIndex,tableConfig:d({loading:u,data:l,columns:e.columns,ref:e.ref,pagination:n,onPageChange:m,onPageSizeChange:g,onColumnResize(a,f){e.updateColumnByDataIndex(a,"width",f),e.updateColumnsWidth()}})}}export{D as u};
